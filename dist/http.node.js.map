{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///external \"querystring\"","webpack:///./node_modules/@babel/runtime/helpers/objectSpread.js","webpack:///external \"http\"","webpack:///external \"https\"","webpack:///external \"url\"","webpack:///./src/client.js","webpack:///./src/utils.js","webpack:///./src/constants.js","webpack:///./src/middleware/basic_auth_middleware.js","webpack:///./src/middleware/body_middleware.js","webpack:///./src/middleware/json_body_middleware.js","webpack:///./src/middleware/json_response_middleware.js","webpack:///./src/middleware/response_status_middleware.js","webpack:///./src/adapters/node.js","webpack:///./entries/node.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","require","target","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","client","adapter","Error","middlewares","request","response","error","del","_len","args","Array","_key","apply","httpClient","_len2","_key2","post","_len6","_key6","put","_len7","_key7","patch","_len5","_key5","head","_len3","_key3","options","_len4","_key4","delete","middleware","chain","callback","push","setup","runMiddleware","reduce","buffer","handleRequestError","reject","BODY","basicAuthMiddleware","string","_options$auth","auth","username","password","headers","atob","Buffer","from","toString","bodyMiddleware","encode","method","body","params","constructor","FormData","jsonBodyMiddleware","contentType","includes","JSON","stringify","jsonResponseMiddleware","data","parse","responseStatusMiddleware","status","String","success","match","redirect","location","url","assign","timeout","prepareOptions","objectSpread_default","defineProperty_default","toLowerCase","requestHasBody","buildUrl","querystring","uri","URL","protocol","http","https","buildRequest","promise","Promise","resolve","once","responseBody","on","chunk","returnValue","statusCode","aborted","abort","write","end","emit","__webpack_exports__","client_client"],"mappings":"mHACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,mBCnEAhC,EAAAD,QAfA,SAAAkC,EAAAT,EAAAN,GAYA,OAXAM,KAAAS,EACAtB,OAAAC,eAAAqB,EAAAT,EAAA,CACAN,QACAL,YAAA,EACAqB,cAAA,EACAC,UAAA,IAGAF,EAAAT,GAAAN,EAGAe,kBCZAjC,EAAAD,QAAAqC,QAAA,gCCAA,IAAAxB,EAAqBf,EAAQ,GAqB7BG,EAAAD,QAnBA,SAAAsC,GACA,QAAApC,EAAA,EAAiBA,EAAAqC,UAAAC,OAAsBtC,IAAA,CACvC,IAAAuC,EAAA,MAAAF,UAAArC,GAAAqC,UAAArC,GAAA,GACAwC,EAAA9B,OAAA+B,KAAAF,GAEA,mBAAA7B,OAAAgC,wBACAF,IAAAG,OAAAjC,OAAAgC,sBAAAH,GAAAK,OAAA,SAAAC,GACA,OAAAnC,OAAAoC,yBAAAP,EAAAM,GAAAjC,eAIA4B,EAAAO,QAAA,SAAAxB,GACAZ,EAAAyB,EAAAb,EAAAgB,EAAAhB,MAIA,OAAAa,kBClBArC,EAAAD,QAAAqC,QAAA,uBCAApC,EAAAD,QAAAqC,QAAA,wBCAApC,EAAAD,QAAAqC,QAAA,qCCAO,SAASa,EAAOC,GACrB,IAAKA,EACH,MAAM,IAAIC,MAAM,uBAGlB,IAAMC,EAAc,CAACC,QAAS,GAAIC,SAAU,GAAIC,MAAO,IACjDC,EAAU,mBAAAC,EAAAnB,UAAAC,OAAImB,EAAJ,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAIF,EAAJE,GAAAtB,UAAAsB,GAAA,OAAaV,EAAOW,WAAP,GAAQ,SAAUT,GAAlBR,OAAkCc,KAgBzDI,EAAa,CAAChD,IAfJ,mBAAAiD,EAAAzB,UAAAC,OAAImB,EAAJ,IAAAC,MAAAI,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAIN,EAAJM,GAAA1B,UAAA0B,GAAA,OAAad,EAAOW,WAAP,GAAQ,MAAOT,GAAfR,OAA+Bc,KAenCO,KAXT,mBAAAC,EAAA5B,UAAAC,OAAImB,EAAJ,IAAAC,MAAAO,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAIT,EAAJS,GAAA7B,UAAA6B,GAAA,OAAajB,EAAOW,WAAP,GAAQ,OAAQT,GAAhBR,OAAgCc,KAW9BU,IAVf,mBAAAC,EAAA/B,UAAAC,OAAImB,EAAJ,IAAAC,MAAAU,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAIZ,EAAJY,GAAAhC,UAAAgC,GAAA,OAAapB,EAAOW,WAAP,GAAQ,MAAOT,GAAfR,OAA+Bc,KAUxBa,MAZpB,mBAAAC,EAAAlC,UAAAC,OAAImB,EAAJ,IAAAC,MAAAa,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAIf,EAAJe,GAAAnC,UAAAmC,GAAA,OAAavB,EAAOW,WAAP,GAAQ,QAAST,GAAjBR,OAAiCc,KAYnBgB,KAd3B,mBAAAC,EAAArC,UAAAC,OAAImB,EAAJ,IAAAC,MAAAgB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAIlB,EAAJkB,GAAAtC,UAAAsC,GAAA,OAAa1B,EAAOW,WAAP,GAAQ,OAAQT,GAAhBR,OAAgCc,KAcZmB,QAbjC,mBAAAC,EAAAxC,UAAAC,OAAImB,EAAJ,IAAAC,MAAAmB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAIrB,EAAJqB,GAAAzC,UAAAyC,GAAA,OAAa7B,EAAOW,WAAP,GAAQ,UAAWT,GAAnBR,OAAmCc,KAaNF,MAAKwB,OAAQxB,EAAKyB,WARzD,SAACC,EAAOC,GAKzB,OAJIA,GACF/B,EAAY8B,GAAOE,KAAKD,GAGnB/B,IAOT,OAFAF,EAAQmC,MAAMvB,GAEPA,oGC1BF,SAASwB,EAAcJ,EAAO7C,GACnC,OAAO6C,EAAMK,OAAO,SAACC,EAAQP,GAAT,OAAwBA,EAAWO,IAASnD,GAS3D,SAASoD,EAAmBlC,EAAO0B,EAAY5B,EAASqC,GAC7DnC,EAAMF,QAAUA,EAEhBqC,EADAnC,EAAQ+B,EAAcL,EAAY1B,ICZ7B,IAAMoC,EAAO,CAClBX,OAAS,CAAC3B,SAAS,EAAOC,UAAU,GACpCxC,IAAS,CAACuC,SAAS,EAAOC,UAAU,GACpCoB,KAAS,CAACrB,SAAS,EAAOC,UAAU,GACpCuB,QAAS,CAACxB,SAAS,EAAOC,UAAU,GACpCiB,MAAS,CAAClB,SAAS,EAAOC,UAAU,GACpCW,KAAS,CAACZ,SAAS,EAAOC,UAAU,GACpCc,IAAS,CAACf,SAAS,EAAOC,UAAU,ICCvB,SAASsC,EAAoBf,GAAS,IARrCgB,EAQqCC,EACtBjB,EAAQkB,KAA/BC,EAD6CF,EAC7CE,SAAUC,EADmCH,EACnCG,SAMhB,OAJID,GAAYC,KACdpB,EAAQqB,QAAR,cAAmC,UAZvBL,EAYwC,GAAAjD,OAAIoD,EAAJ,KAAApD,OAAgBqD,GAXlD,mBAATE,KACFA,KAAKN,GAELO,OAAOC,KAAKR,GAAQS,SAAS,YAW/BzB,ECTM,SAAS0B,EAAeC,EAAQ3B,GAC7C,OAAKc,EAAKd,EAAQ4B,QAAQpD,QAKtBwB,EAAQ6B,KACH7B,GAGLA,EAAQ8B,OAAOC,cAAgBjG,OACjCkE,EAAQ6B,KAAOF,EAAO3B,EAAQ8B,QAE9B9B,EAAQ6B,KAAO7B,EAAQ8B,OAGpB9B,EAAQqB,QAAQ,kBApBHvE,EAoBkCkD,EAAQ6B,KAnBjC,mBAAbG,UAA2BlF,aAAkBkF,YAoBzDhC,EAAQqB,QAAQ,gBAAkB,qCAG7BrB,WAlBEA,EAAQ6B,KACR7B,GAPX,IAAoBlD,ECAL,SAASmF,EAAmBjC,GACzC,IAAKc,EAAKd,EAAQ4B,QAAQpD,QAExB,cADOwB,EAAQ6B,KACR7B,EAGT,GAAIA,EAAQ6B,KACV,OAAO7B,EAGT,IAAMkC,EAAclC,EAAQqB,QAAQ,gBAEpC,OAAKa,GAAgBA,EAAYC,SAAS,qBAI1CnC,EAAQ6B,KAAOO,KAAKC,UAAUrC,EAAQ8B,QAE/B9B,GALEA,ECfI,SAASsC,EAAuB7D,GAC7C,IAAKA,EAAS4C,QAAQ,gBAAgBc,SAAS,oBAC7C,OAAO1D,EAGT,IACEA,EAAS8D,KAAOH,KAAKI,MAAM/D,EAASoD,MACpC,MAAOnD,IAIT,OAAOD,ECXM,SAASgE,EAAyBhE,GAC/C,IAAMiE,EAASC,OAAOlE,EAASiE,QAS/B,OAPAjE,EAASmE,UAAaF,EAAO,GAAGG,MAAM,UACtCpE,EAASqE,SAAyB,MAAdJ,EAAO,GAEvBjE,EAASqE,WACXrE,EAASsE,SAAWtE,EAAS4C,QAAQ0B,UAGhCtE,EC0FF,SAASJ,EAAQuD,EAAQrD,EAAayE,EAAKlB,EAAQ9B,GPhGnD,IAA0BqB,EOiG/BS,EAASA,GAAU,GACnB9B,EP7EK,SAAwBA,GAC7B,OAAOlE,OAAOmH,OAAO,CAAC5B,QAAS,GACTH,KAAM,GACNW,KAAM,KACND,OAAQ,KACRsB,QAAS,GAAIlD,GAAW,IOwEpCmD,CAAenD,IAEzBA,EAAUS,EAAclC,EAAYC,QAAb4E,IAAA,GAA0BpD,EAA1B,CAAmC8B,SAAQF,SAAQoB,UAClE3B,SPrGuBA,EOqGIrB,EAAQqB,QPpGpCvF,OAAO+B,KAAKwD,GAASX,OAAO,SAACC,EAAQhE,GAAT,OACjCb,OAAOmH,OAAOtC,EAAd0C,IAAA,GAAwB1G,EAAI2G,cAAgBjC,EAAQ1E,MACnD,KOmGHqD,EAAQgD,IP1FH,SAAkBA,EAAKlB,EAAQyB,EAAgB5B,GAMpD,OALK4B,GAAkBzH,OAAO+B,KAAKiE,GAAQpE,OAAS,IAClDsF,GAAOA,EAAIb,SAAS,KAAO,IAAM,IACjCa,GAAOrB,EAAOG,IAGTkB,EOoFOQ,CAASxD,EAAQgD,IAAKhD,EAAQ8B,OAAQhB,EAAKd,EAAQ4B,QAAQpD,QAASiF,IAAYpB,WAE9F,IAAM7D,EA5CR,SAAsBwE,EAAKpB,EAAQP,EAAS6B,GAC1C,IAAMQ,EAAM,IAAIC,MAAIX,GASpB,OARgC,UAAjBU,EAAIE,SAAuBC,IAAOC,KAE1BtF,QAAQkF,EAAK,CAClC9B,SACAP,UACA6B,YAqCca,CAAa/D,EAAQgD,IAAKhD,EAAQ4B,OAAQ5B,EAAQqB,QAASrB,EAAQkD,SAE7Ec,EAAU,IAAIC,QAAQ,SAASC,EAASrD,GAC5CrC,EAAQ2F,KAAK,WAxFjB,SAAwB3F,EAASoD,EAAQxB,EAAY8D,EAASzF,GAC5D,IAAI2F,EAAe7C,OAAOC,KAAK,IAE/B/C,EAAS4F,GAAG,OAAQ,SAAAC,GAClBF,EAAe7C,OAAOxD,OAAO,CAACqG,EAAc7C,OAAOC,KAAK8C,OAG1D7F,EAAS4F,GAAG,MAAO,WACjB,IAAIE,EAAc,CAChB1C,KAAMuC,EACN1B,OAAQjE,EAAS+F,WACjBhG,UACAC,WACAmD,SACAP,QAAS5C,EAAS4C,SAGpBkD,EAAc9D,EAAcL,EAAYmE,GAExCL,EAAQK,MAqEgC3H,KAAK,KAAM4B,EAASwB,EAAQ4B,OAAQrD,EAAYE,SAAUyF,IAClG1F,EAAQ2F,KAAK,QAtDjB,SAAqB3F,EAAS4B,EAAYS,GACxC,IAAMnC,EAAQ,IAAIJ,MAAM,mBACxBI,EAAM+F,SAAU,EAChB7D,EAAmBlC,EAAO0B,EAAY5B,EAASqC,IAmDXjE,KAAK,KAAM4B,EAASD,EAAYG,MAAOmC,IACzErC,EAAQ6F,GAAG,UA/Df,SAAuB7F,EAAS4B,EAAYS,GAC1C,IAAMnC,EAAQ,IAAIJ,MAAM,qBACxBI,EAAMwE,SAAU,EAEhBtC,EAAmBlC,EAAO0B,EAAY5B,EAASqC,GAC/CrC,EAAQkG,SA0D8B9H,KAAK,KAAM4B,EAASD,EAAYG,MAAOmC,IAC3ErC,EAAQ6F,GAAG,QApEf,SAAqB7F,EAAS4B,EAAYS,EAAQnC,GAChDkC,EAAmBlC,EAAO0B,EAAY5B,EAASqC,IAmEbjE,KAAK,KAAM4B,EAASD,EAAYG,MAAOmC,IAEnEb,EAAQ6B,MACVrD,EAAQmG,MAAM3E,EAAQ6B,MAGxBrD,EAAQoG,QAQV,OALAZ,EAAQU,MAAQ,WACdlG,EAAQqG,KAAK,SACbrG,EAAQkG,SAGHV,EAGT3F,EAAQmC,MAAQ,SAAApC,GACdA,EAAOgC,WAAW,UAAWW,GAC7B3C,EAAOgC,WAAW,UAAW6B,GAC7B7D,EAAOgC,WAAW,UAAWsB,EAAe9E,KAAK,KAAM6G,IAAYpB,YACnEjE,EAAOgC,WAAW,WAAYkC,GAC9BlE,EAAOgC,WAAW,WAAYqC,ICxIhCzH,EAAAU,EAAAoJ,EAAA,2BAAAC,IAAA/J,EAAAU,EAAAoJ,EAAA,4BAAAzG","file":"http.node.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","module.exports = require(\"querystring\");","var defineProperty = require(\"./defineProperty\");\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread;","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"url\");","export function client(adapter) {\n  if (!adapter) {\n    throw new Error(\"Adapter is required\");\n  }\n\n  const middlewares = {request: [], response: [], error: []};\n  const del     = (...args) => adapter(\"delete\", middlewares, ...args);\n  const get     = (...args) => adapter(\"get\", middlewares, ...args);\n  const head    = (...args) => adapter(\"head\", middlewares, ...args);\n  const options = (...args) => adapter(\"options\", middlewares, ...args);\n  const patch   = (...args) => adapter(\"patch\", middlewares, ...args);\n  const post    = (...args) => adapter(\"post\", middlewares, ...args);\n  const put     = (...args) => adapter(\"put\", middlewares, ...args);\n\n  const middleware = (chain, callback) => {\n    if (callback) {\n      middlewares[chain].push(callback);\n    }\n\n    return middlewares;\n  };\n\n  const httpClient = {get, post, put, patch, head, options, del, delete: del, middleware};\n\n  adapter.setup(httpClient);\n\n  return httpClient;\n}\n","export function runMiddleware(chain, target) {\n  return chain.reduce((buffer, middleware) => middleware(buffer), target);\n}\n\nexport function normalizeHeaders(headers) {\n  return Object.keys(headers).reduce((buffer, key) => (\n    Object.assign(buffer, {[key.toLowerCase()]: headers[key]})\n  ), {});\n}\n\nexport function handleRequestError(error, middleware, request, reject) {\n  error.request = request;\n  error = runMiddleware(middleware, error);\n  reject(error);\n}\n\nexport function buildUrl(url, params, requestHasBody, encode) {\n  if (!requestHasBody && Object.keys(params).length > 0) {\n    url += url.includes(\"?\") ? \"&\" : \"?\";\n    url += encode(params);\n  }\n\n  return url;\n}\n\nexport function prepareOptions(options) {\n  return Object.assign({headers: {},\n                        auth: {},\n                        body: null,\n                        method: null,\n                        timeout: 0}, options || {});\n}\n","export const BODY = {\n  delete:  {request: false, response: true},\n  get:     {request: false, response: true},\n  head:    {request: false, response: false},\n  options: {request: false, response: true},\n  patch:   {request: true,  response: true},\n  post:    {request: true,  response: true},\n  put:     {request: true,  response: true}\n};\n","function base64(string) {\n  if (typeof atob === \"function\") {\n    return atob(string);\n  } else {\n    return Buffer.from(string).toString(\"base64\");\n  }\n}\n\nexport default function basicAuthMiddleware(options) {\n  let { username, password } = options.auth;\n\n  if (username || password) {\n    options.headers[\"authorization\"] = \"Basic \" + base64(`${username}:${password}`);\n  }\n\n  return options;\n}\n","import { BODY } from \"../constants\";\n\nfunction isFormData(object) {\n  return typeof FormData === \"function\" && object instanceof FormData;\n}\n\nexport default function bodyMiddleware(encode, options) {\n  if (!BODY[options.method].request) {\n    delete options.body;\n    return options;\n  }\n\n  if (options.body) {\n    return options;\n  }\n\n  if (options.params.constructor === Object) {\n    options.body = encode(options.params);\n  } else {\n    options.body = options.params;\n  }\n\n  if (!options.headers[\"content-type\"] && !isFormData(options.body)) {\n    options.headers[\"content-type\"] = \"application/x-www-form-urlencoded\";\n  }\n\n  return options;\n}\n","import { BODY } from \"../constants\";\n\nexport default function jsonBodyMiddleware(options) {\n  if (!BODY[options.method].request) {\n    delete options.body;\n    return options;\n  }\n\n  if (options.body) {\n    return options;\n  }\n\n  const contentType = options.headers[\"content-type\"];\n\n  if (!contentType || !contentType.includes(\"application/json\")) {\n    return options;\n  }\n\n  options.body = JSON.stringify(options.params);\n\n  return options;\n}\n","export default function jsonResponseMiddleware(response) {\n  if (!response.headers[\"content-type\"].includes(\"application/json\")) {\n    return response;\n  }\n\n  try {\n    response.data = JSON.parse(response.body);\n  } catch (error) {\n\n  }\n\n  return response;\n}\n","export default function responseStatusMiddleware(response) {\n  const status = String(response.status);\n\n  response.success = !!(status[0].match(/^[2-3]/));\n  response.redirect = status[0] === \"3\";\n\n  if (response.redirect) {\n    response.location = response.headers.location;\n  }\n\n  return response;\n}\n","import http from \"http\";\nimport https from \"https\";\nimport querystring from \"querystring\";\nimport { URL } from \"url\";\n\nimport {\n  buildUrl,\n  prepareOptions,\n  handleRequestError,\n  normalizeHeaders,\n  runMiddleware\n} from \"../utils\";\n\nimport {\n  BODY\n} from \"../constants\";\n\nimport basicAuthMiddleware from \"../middleware/basic_auth_middleware\";\nimport bodyMiddleware from \"../middleware/body_middleware\";\nimport jsonBodyMiddleware from \"../middleware/json_body_middleware\";\nimport jsonResponseMiddleware from \"../middleware/json_response_middleware\";\nimport responseStatusMiddleware from \"../middleware/response_status_middleware\";\n\nfunction handleResponse(request, method, middleware, resolve, response) {\n  let responseBody = Buffer.from([]);\n\n  response.on(\"data\", chunk => {\n    responseBody = Buffer.concat([responseBody, Buffer.from(chunk)]);\n  });\n\n  response.on(\"end\", () => {\n    let returnValue = {\n      body: responseBody,\n      status: response.statusCode,\n      request,\n      response,\n      method,\n      headers: response.headers\n    };\n\n    returnValue = runMiddleware(middleware, returnValue);\n\n    resolve(returnValue);\n  });\n}\n\nfunction handleError(request, middleware, reject, error) {\n  handleRequestError(error, middleware, request, reject);\n}\n\nfunction handleTimeout(request, middleware, reject) {\n  const error = new Error(\"Request timed out\");\n  error.timeout = true;\n\n  handleRequestError(error, middleware, request, reject);\n  request.abort();\n}\n\nfunction handleAbort(request, middleware, reject) {\n  const error = new Error(\"Aborted request\");\n  error.aborted = true;\n  handleRequestError(error, middleware, request, reject);\n}\n\nfunction buildRequest(url, method, headers, timeout) {\n  const uri = new URL(url);\n  const engine = uri.protocol === \"http:\" ? http : https;\n\n  const request = engine.request(uri, {\n    method,\n    headers,\n    timeout\n  });\n\n  return request;\n}\n\n/**\n * Perform http requests using [http](https://nodejs.org/api/http.html) and [https](https://nodejs.org/api/https.html).\n *\n * ```js\n * client\n *   .get(\"https://example.com\")\n *   .then((response, request) => console.log(response, request))\n *   .catch(error => console.log(error, error.request, error.aborted));\n * ```\n *\n * @param  {String} method           The HTTP request method.\n * @param  {Object} middlewares      The middleware chain.\n * @param  {String} url              The request url.\n * @param  {Object} params           The request params.\n * @param  {Object} options.auth     An object representing the basic authentication credentials.\n *                                   It must be something like `{username, password}`.\n * @param  {Object} options.headers  The request headers. Header names should be defined in lowercase form.\n * @param  {Object} options.timeout  The request timeout. Default to 0 (never times out).\n * @param  {Object} options.body     The request body. In case you want to specify it manually.\n * @return {Promise}                 A custom response promise that has an additional `.abort()`\n *                                   method that aborts the in-flight request. Aborted requests will\n *                                   reject the promise.\n */\nexport function adapter(method, middlewares, url, params, options) {\n  params = params || {};\n  options = prepareOptions(options);\n\n  options = runMiddleware(middlewares.request, {...options, params, method, url});\n  options.headers = normalizeHeaders(options.headers);\n  options.url = buildUrl(options.url, options.params, BODY[options.method].request, querystring.stringify);\n\n  const request = buildRequest(options.url, options.method, options.headers, options.timeout);\n\n  const promise = new Promise(function(resolve, reject) {\n    request.once(\"response\", handleResponse.bind(null, request, options.method, middlewares.response, resolve));\n    request.once(\"abort\", handleAbort.bind(null, request, middlewares.error, reject));\n    request.on(\"timeout\", handleTimeout.bind(null, request, middlewares.error, reject));\n    request.on(\"error\", handleError.bind(null, request, middlewares.error, reject));\n\n    if (options.body) {\n      request.write(options.body);\n    }\n\n    request.end();\n  });\n\n  promise.abort = () => {\n    request.emit(\"abort\");\n    request.abort();\n  };\n\n  return promise;\n}\n\nadapter.setup = client => {\n  client.middleware(\"request\", basicAuthMiddleware);\n  client.middleware(\"request\", jsonBodyMiddleware); // must be added before bodyMiddleware\n  client.middleware(\"request\", bodyMiddleware.bind(null, querystring.stringify));\n  client.middleware(\"response\", jsonResponseMiddleware);\n  client.middleware(\"response\", responseStatusMiddleware);\n};\n","export { client } from \"../src/client\";\nexport { adapter } from \"../src/adapters/node\";\n"],"sourceRoot":""}